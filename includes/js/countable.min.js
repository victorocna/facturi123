(function($){$.fn.extend({countable:function(c){return this.each(function(){var b=$(this),interval,prev_char_diff,$el,options=$.extend({threshold:.5,appendMethod:'insertBefore',target:b,startOpacity:.25,maxLength:parseInt(b.attr('maxlength'),10)||0,maxClassName:'maxed',className:'counter',tagName:'span',interval:750,positiveCopy:'{n}&nbsp;caractere ramase',negativeCopy:'{n}&nbsp;caractere depasite',fadeDuration:'normal',defaultText:''},c);$el=$('<'+options.tagName+'/>').html(options.positiveCopy.replace('{n}','<span class="num"></span>')).addClass(options.className);if($.support.opacity)$el.css({opacity:0});$el[options.appendMethod](options.target);b.bind('keyup',check).bind('focus blur',function(a){if(a.type=='blur')clearInterval(interval);if(a.type=='focus'&&!interval)setInterval(check,options.interval)});function check(){var a=b.val(),length=(a==options.defaultText?0:a.length),percentage_complete=length/options.maxLength,char_diff=options.maxLength-length,opacity;if(prev_char_diff!=undefined&&char_diff==prev_char_diff)return;if($el.is(':hidden')&&percentage_complete>=options.threshold)$el.show();if($el.is(':visible')&&percentage_complete<options.threshold)$el.hide();if($.support.opacity){opacity=options.startOpacity+((options.threshold-percentage_complete)*((options.startOpacity*2)-2));$el.stop().fadeTo(options.fadeDuration,percentage_complete>=options.threshold?opacity:0)}if(char_diff>=0){if($el.is('.'+options.maxClassName))$el.html(options.positiveCopy.replace('{n}','<span class="num"></span>'))}else{if(!$el.is('.'+options.maxClassName))$el.html(options.negativeCopy.replace('{n}','<span class="num"></span>'))}$el[(char_diff<=0?'add':'remove')+'Class'](options.maxClassName);$el.find('.num').text(Math.abs(char_diff));if(char_diff==-1||char_diff==1)$el.html($el.html().replace(/caractere ramase\b/,'caracter ramas'));else $el.html($el.html().replace(/caracter ramas\b/,'caractere ramase'));prev_char_diff=char_diff};check()})}})})(jQuery);